[tasks.fix]
alias = "bf"
description = "Apply biome safe fixes and format code"
run = ["biome check --fix --config-path=biome.jsonc", "dprint fmt"]

[tasks.build-circuit]
alias = "bc"
description = "Buil circuit"
dir = "circuit"
run = "scarb --release build"

[tasks.build-web]
alias = "bw"
description = "Build the web app"
dir = "web"
run = ["bun tsc -b", "bun vite build"]
quiet = true

[tasks.build]
alias = "b"
description = "Build the circuit and web app"
run = [
  "mise r build-circuit",
  "mise r build-web",
]
quiet = true

[tasks.dev]
alias = "d"
description = "Start the dev server"
dir = "web"
run = ["mise run build-circuit", "bun vite"]
quiet = true

[tasks.execute-circuit]
alias = "ec"
description = "Execute the circuit with arguments - Usage: mise r ec {argument}"
dir = "circuit"
run = "scarb execute -p circuit --print-program-output --arguments"

[tasks.preview]
alias = "p"
description = "Preview the app"
dir = "web"
run = "bun vite preview"
quiet = true

[tasks.test-circuit]
alias = "tc"
description = "Run circuit tests"
dir = "circuit"
run = "scarb test"

[tools]
bun = "latest"
"cargo:convco" = "latest"
dprint = "latest"
hk = "latest"
pkl = "latest"
"npm:@biomejs/biome" = "latest"
"npm:typescript" = "latest"
"asdf:scarb" = "latest"
"cargo:cairo-format" = "latest"
rust = { version = "nightly-2025-04-06", profile = "minimal" }
